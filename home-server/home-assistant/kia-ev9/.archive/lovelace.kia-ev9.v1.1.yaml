# Kia EV9 Dashboard Cards
# Version: 1.1
# Last Updated: 2025-01-19
#
# DEPLOYMENT:
# 1. Create a new dashboard or add to existing
# 2. Edit dashboard → Raw configuration editor
# 3. Add these cards to your views
#
# REQUIREMENTS:
# - mushroom cards (recommended, available in HACS)

# ============================================================
# FULL DASHBOARD VIEW
# Copy everything below into a dashboard view
# ============================================================

title: Kia EV9
path: kia-ev9
icon: mdi:car-electric
cards:

  # ============================================================
  # ROW 1: BATTERY & RANGE
  # ============================================================
  - type: horizontal-stack
    cards:
      - type: gauge
        entity: sensor.ev9_ev_battery_level
        name: Battery
        min: 0
        max: 100
        severity:
          green: 50
          yellow: 20
          red: 10
        needle: true

      - type: vertical-stack
        cards:
          - type: entity
            entity: sensor.ev9_ev_range
            name: EV Range
            icon: mdi:road-variant

          - type: entity
            entity: sensor.ev9_odometer
            name: Odometer
            icon: mdi:counter

  # ============================================================
  # ROW 2: CHARGING STATUS (Conditional - shows when plugged in)
  # ============================================================
  - type: conditional
    conditions:
      - condition: state
        entity: binary_sensor.ev9_ev_battery_plug
        state: "on"
    card:
      type: vertical-stack
      cards:
        - type: markdown
          content: |
            ## ⚡ Charging Status

        - type: horizontal-stack
          cards:
            - type: entity
              entity: sensor.ev9_ev_charging_power
              name: Current Power
              icon: mdi:flash

            - type: entity
              entity: input_number.ev9_expected_charge_power
              name: Expected Power
              icon: mdi:flash-outline

        - type: entities
          entities:
            - entity: binary_sensor.ev9_ev_battery_charge
              name: Charging Active
            - entity: sensor.ev9_estimated_charge_duration
              name: Time Remaining
            - entity: number.ev9_ac_charging_limit
              name: AC Charge Limit
            - entity: number.ev9_dc_charging_limit
              name: DC Charge Limit
            - entity: input_select.ev9_charging_current
              name: Charging Current

        # Stop/Start Charging Buttons
        - type: horizontal-stack
          cards:
            - type: button
              name: Stop Charging
              icon: mdi:stop-circle
              icon_height: 40px
              tap_action:
                action: call-service
                service: kia_uvo.stop_charge
                data:
                  device_id: 7f6b71f10dc261408a02149c68aa3e23
                confirmation:
                  text: "Stop charging?"

            - type: button
              name: Start Charging
              icon: mdi:play-circle
              icon_height: 40px
              tap_action:
                action: call-service
                service: kia_uvo.start_charge
                data:
                  device_id: 7f6b71f10dc261408a02149c68aa3e23

            - type: button
              name: Refresh Status
              icon: mdi:refresh
              icon_height: 40px
              tap_action:
                action: call-service
                service: kia_uvo.force_update
                data:
                  device_id: 7f6b71f10dc261408a02149c68aa3e23

  # ============================================================
  # ROW 3: QUICK ACTIONS
  # ============================================================
  - type: horizontal-stack
    cards:
      - type: button
        entity: lock.ev9_door_lock
        name: Lock
        icon: mdi:lock
        tap_action:
          action: call-service
          service: lock.lock
          target:
            entity_id: lock.ev9_door_lock

      - type: button
        entity: lock.ev9_door_lock
        name: Unlock
        icon: mdi:lock-open
        tap_action:
          action: call-service
          service: lock.unlock
          target:
            entity_id: lock.ev9_door_lock

      - type: button
        name: Climate On
        icon: mdi:air-conditioner
        tap_action:
          action: call-service
          service: kia_uvo.start_climate
          data:
            device_id: 7f6b71f10dc261408a02149c68aa3e23
            climate: true
            temperature: 72

      - type: button
        name: Climate Off
        icon: mdi:fan-off
        tap_action:
          action: call-service
          service: kia_uvo.stop_climate
          data:
            device_id: 7f6b71f10dc261408a02149c68aa3e23

  # ============================================================
  # ROW 4: VEHICLE STATUS
  # ============================================================
  - type: entities
    title: Vehicle Status
    show_header_toggle: false
    entities:
      - entity: binary_sensor.ev9_locked
        name: Lock Status
        secondary_info: last-changed
      - entity: binary_sensor.ev9_air_conditioner
        name: Climate Active
      - entity: sensor.ev9_car_battery_level
        name: 12V Battery
      - entity: sensor.ev9_last_updated_at
        name: Last Update
        format: relative

  # ============================================================
  # ROW 5: DOORS & OPENINGS
  # ============================================================
  - type: glance
    title: Doors & Openings
    columns: 4
    show_state: false
    entities:
      - entity: binary_sensor.ev9_front_left_door
        name: FL
      - entity: binary_sensor.ev9_front_right_door
        name: FR
      - entity: binary_sensor.ev9_back_left_door
        name: BL
      - entity: binary_sensor.ev9_back_right_door
        name: BR
      - entity: binary_sensor.ev9_trunk
        name: Trunk
      - entity: binary_sensor.ev9_hood
        name: Hood

  # ============================================================
  # ROW 6: MAP
  # ============================================================
  - type: map
    entities:
      - entity: device_tracker.ev9_location
    dark_mode: true
    default_zoom: 15
    aspect_ratio: 16:9

  # ============================================================
  # ROW 7: WALK-AWAY LOCK & AUTO-CLOSE WINDOWS
  # ============================================================
  - type: entities
    title: Security Automation
    show_header_toggle: false
    entities:
      - type: section
        label: Walk-Away Lock
      - entity: input_boolean.ev9_walk_away_lock_enabled
        name: Enabled
      - entity: input_number.ev9_walk_away_lock_delay
        name: Delay After Leaving Home

      - type: section
        label: Auto-Close Windows
      - entity: input_boolean.ev9_auto_close_windows_enabled
        name: Enabled
      - entity: input_number.ev9_auto_close_windows_delay
        name: Delay After Leaving Home

  # ============================================================
  # ROW 8: CHARGING MONITORING SETTINGS
  # ============================================================
  - type: entities
    title: Charging Monitor
    show_header_toggle: false
    entities:
      - entity: input_number.ev9_expected_charge_power
        name: Expected Charge Power (kW)
      - entity: input_number.ev9_low_power_threshold
        name: Low Power Alert Threshold
      - entity: input_boolean.ev9_notify_low_charging_power
        name: Alert on Low Power
      - entity: input_boolean.ev9_notify_charging_interrupted
        name: Alert on Charge Interrupted
      - entity: input_number.ev9_charge_interrupt_check_delay
        name: Interrupt Check Delay
      - entity: input_boolean.ev9_overnight_charge_monitor
        name: Overnight Monitor Enabled

  # ============================================================
  # ROW 9: PRE-CONDITIONING SCHEDULE
  # ============================================================
  - type: entities
    title: Pre-conditioning
    show_header_toggle: false
    entities:
      - entity: input_boolean.ev9_precondition_enabled
        name: Master Enable
      - entity: input_number.ev9_precondition_lead_time
        name: Start Before Departure
      - entity: input_number.ev9_target_temperature
        name: Target Temperature

  - type: entities
    title: Weekly Schedule
    show_header_toggle: false
    entities:
      - type: attribute
        entity: input_datetime.ev9_departure_monday
        attribute: timestamp
        name: " "
        format: time
        prefix: "Mon: "

      - type: custom:fold-entity-row
        head:
          type: section
          label: Monday
        entities:
          - entity: input_boolean.ev9_precondition_monday
            name: Enabled
          - entity: input_datetime.ev9_departure_monday
            name: Departure Time

      - type: custom:fold-entity-row
        head:
          type: section
          label: Tuesday
        entities:
          - entity: input_boolean.ev9_precondition_tuesday
            name: Enabled
          - entity: input_datetime.ev9_departure_tuesday
            name: Departure Time

      - type: custom:fold-entity-row
        head:
          type: section
          label: Wednesday
        entities:
          - entity: input_boolean.ev9_precondition_wednesday
            name: Enabled
          - entity: input_datetime.ev9_departure_wednesday
            name: Departure Time

      - type: custom:fold-entity-row
        head:
          type: section
          label: Thursday
        entities:
          - entity: input_boolean.ev9_precondition_thursday
            name: Enabled
          - entity: input_datetime.ev9_departure_thursday
            name: Departure Time

      - type: custom:fold-entity-row
        head:
          type: section
          label: Friday
        entities:
          - entity: input_boolean.ev9_precondition_friday
            name: Enabled
          - entity: input_datetime.ev9_departure_friday
            name: Departure Time

      - type: custom:fold-entity-row
        head:
          type: section
          label: Saturday
        entities:
          - entity: input_boolean.ev9_precondition_saturday
            name: Enabled
          - entity: input_datetime.ev9_departure_saturday
            name: Departure Time

      - type: custom:fold-entity-row
        head:
          type: section
          label: Sunday
        entities:
          - entity: input_boolean.ev9_precondition_sunday
            name: Enabled
          - entity: input_datetime.ev9_departure_sunday
            name: Departure Time

  # ============================================================
  # ROW 10: NOTIFICATION SETTINGS
  # ============================================================
  - type: entities
    title: Notification Settings
    show_header_toggle: false
    entities:
      - entity: input_boolean.ev9_notify_charging_complete
        name: Charging Complete
      - entity: input_boolean.ev9_notify_low_battery
        name: Low Battery Alert
      - entity: input_number.ev9_low_battery_threshold
        name: Low Battery Threshold
      - entity: input_boolean.ev9_notify_unlocked_at_home
        name: Unlocked at Home Alert
      - entity: input_number.ev9_unlocked_alert_delay
        name: Unlocked Alert Delay

# ============================================================
# ALTERNATIVE: SIMPLE SCHEDULE (without fold-entity-row)
# Use this if you don't have fold-entity-row installed
# ============================================================

# - type: entities
#   title: Weekly Schedule
#   show_header_toggle: false
#   entities:
#     - type: section
#       label: Monday
#     - entity: input_boolean.ev9_precondition_monday
#       name: Enabled
#     - entity: input_datetime.ev9_departure_monday
#       name: Departure Time
#
#     - type: section
#       label: Tuesday
#     - entity: input_boolean.ev9_precondition_tuesday
#       name: Enabled
#     - entity: input_datetime.ev9_departure_tuesday
#       name: Departure Time
#
#     # ... repeat for other days
