title: Jose (Vacuum)
views:
  - title: Jose
    path: jose
    type: sections
    max_columns: 3
    sections:
      # Main Control Section
      - type: grid
        cards:
          # Vacuum Status & Control Tile
          - type: tile
            entity: vacuum.jose
            name: Jose
            icon: mdi:robot-vacuum
            features:
              - type: vacuum-commands
                commands:
                  - start_pause
                  - stop
                  - return_home
                  - locate
            tap_action:
              action: more-info

          # Battery Status
          - type: tile
            entity: sensor.jose_battery
            name: Battery
            icon: mdi:battery
            color: primary

          # Station State
          - type: tile
            entity: sensor.jose_station_state
            name: Station
            icon: mdi:home-automation
            color: cyan

          # Mop Attached
          - type: tile
            entity: binary_sensor.jose_mop_attached
            name: Mop
            icon: mdi:mop
            color: blue

      # Error Alert Section (Conditional - shows when error exists)
      - type: grid
        cards:
          - type: conditional
            conditions:
              - condition: state
                entity: sensor.jose_error
                state_not: "none"
              - condition: state
                entity: sensor.jose_error
                state_not: "unknown"
              - condition: state
                entity: sensor.jose_error
                state_not: ""
            card:
              type: markdown
              content: |
                ## ⚠️ Current Error
                **{{ states('sensor.jose_error') }}**
              card_mod:
                style: |
                  ha-card {
                    background: rgba(var(--rgb-red), 0.2);
                    border: 2px solid var(--error-color);
                  }

          # Last Error Log Entry (Always visible)
          - type: markdown
            title: Last Error
            content: |
              {{ states('input_text.jose_error_log_1') }}
            card_mod:
              style: |
                ha-card {
                  --ha-card-header-color: var(--warning-color);
                }

      # Last Cleaning Session
      - type: grid
        title: Last Cleaning Session
        cards:
          - type: entity
            entity: sensor.jose_area_cleaned
            name: Area Cleaned
            icon: mdi:texture-box

          - type: entity
            entity: sensor.jose_cleaning_duration
            name: Duration
            icon: mdi:timer-outline

          - type: entity
            entity: event.jose_last_job
            name: Last Job Result
            icon: mdi:check-circle-outline

      # Quick Actions
      - type: grid
        title: Actions
        cards:
          - type: tile
            entity: button.jose_empty_dustbin
            name: Empty Dustbin
            icon: mdi:delete-empty
            tap_action:
              action: call-service
              service: button.press
              target:
                entity_id: button.jose_empty_dustbin
            color: orange

          - type: tile
            entity: button.jose_relocate
            name: Relocate
            icon: mdi:crosshairs-gps
            tap_action:
              action: call-service
              service: button.press
              target:
                entity_id: button.jose_relocate
            color: teal

          - type: tile
            entity: select.jose_auto_empty_frequency
            name: Auto Empty
            icon: mdi:autorenew
            features:
              - type: select-options
            color: cyan

          - type: tile
            entity: select.jose_water_flow_level
            name: Water Flow
            icon: mdi:water
            features:
              - type: select-options
            color: blue

      # Statistics Section
      - type: grid
        title: Lifetime Statistics
        cards:
          - type: statistic
            entity: sensor.jose_total_cleanings
            name: Total Cleanings
            period:
              calendar:
                period: year

          - type: entity
            entity: sensor.jose_total_area_cleaned
            name: Total Area
            icon: mdi:texture-box

          - type: entity
            entity: sensor.jose_total_cleaning_duration
            name: Total Duration
            icon: mdi:clock-outline

      # Maintenance Section
      - type: grid
        title: Maintenance
        cards:
          - type: gauge
            entity: sensor.jose_filter_lifespan
            name: Filter
            min: 0
            max: 100
            severity:
              green: 50
              yellow: 25
              red: 0

          - type: gauge
            entity: sensor.jose_main_brush_lifespan
            name: Main Brush
            min: 0
            max: 100
            severity:
              green: 50
              yellow: 25
              red: 0

          - type: gauge
            entity: sensor.jose_side_brush_lifespan
            name: Side Brush
            min: 0
            max: 100
            severity:
              green: 50
              yellow: 25
              red: 0

          - type: gauge
            entity: sensor.jose_hand_filter_lifespan
            name: Hand Filter
            min: 0
            max: 100
            severity:
              green: 50
              yellow: 25
              red: 0

          - type: gauge
            entity: sensor.jose_unit_care_lifespan
            name: Unit Care
            min: 0
            max: 100
            severity:
              green: 50
              yellow: 25
              red: 0

      # Map Section
      - type: grid
        title: Map
        cards:
          - type: picture-entity
            entity: image.jose_map
            show_name: false
            show_state: false
            camera_view: auto

      # Error History Section
      - type: grid
        title: Error History
        cards:
          - type: entities
            entities:
              - entity: input_text.jose_error_log_1
                name: "1"
              - entity: input_text.jose_error_log_2
                name: "2"
              - entity: input_text.jose_error_log_3
                name: "3"
              - entity: input_text.jose_error_log_4
                name: "4"
              - entity: input_text.jose_error_log_5
                name: "5"
              - entity: input_text.jose_error_log_6
                name: "6"
              - entity: input_text.jose_error_log_7
                name: "7"
              - entity: input_text.jose_error_log_8
                name: "8"
              - entity: input_text.jose_error_log_9
                name: "9"
              - entity: input_text.jose_error_log_10
                name: "10"
            title: Recent Errors

      # Fan Speed Control
      - type: grid
        title: Settings
        cards:
          - type: tile
            entity: vacuum.jose
            name: Fan Speed
            icon: mdi:fan
            features:
              - type: fan-speed
            color: green

          - type: tile
            entity: select.jose_active_map
            name: Active Map
            icon: mdi:map
            features:
              - type: select-options
            color: purple
